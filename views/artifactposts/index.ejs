<!--BLOGPOST INDEX-->
<% include ../partials/header %>

<section class="blogpostindexpage">
  <div class="blogpostindexintro greybackground">
    <div class="container">
      <div class="row mb-2">
        <div class="col page-header">
          <h2>Artifacts</h2>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <form action="/artifactposts/search" method="get">
          <div class="form-group">
            <input type="text" name="name" size="40"
                   placeholder="Enter keywords to search your artifacts...">
            <input type="submit" value="Search">
            <input type="button" value="Advanced" data-toggle="collapse" data-target="#search_adv">
          </div>

          <div class="container collapse" id="search_adv">
            <label for="author">Author</label>
            <input type="text" name="author" id="author">
            <label for="date">Date</label>
            <select name="date" id="date"></select>
          </div>
        </form>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <hr width="100%" />
      </div>
    </div>
  </div>

  <div class="container">
    <% artipost.sort().reverse().forEach(function(artipost){ %>
    <div class="row">
      <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3">
        <a href="/artifactposts/<%=artipost._id %>"
          ><img class="img-fluid" src="<%= artipost.image %>"
        /></a>
      </div>
      <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9">
        <p><%=artipost.year%></p>
        <h2><%=artipost.name%></h2>
        <p><%- artipost.description.substring(0, 200) %>...</p>
        <a class="btn btn-outline-primary" href="/artifactposts/<%=artipost._id %>"
          >Read More</a
        >
      </div>
    </div>
    <div class="row">
      <hr width="100%" />
    </div>
    <% }); %>
    <div class="row">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
        <p>
          <a class="btn btn-primary btn-sm" href="/artifactposts/new">Add New Post</a>
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  var date = new Date();
  for (var i = Number(date.getFullYear()); i >= 1900; i--) {
    var opt = document.createElement("option");
    opt.text = i.toString();
    document.getElementById("date").add(opt, null);
  }
</script>

<% include ../partials/footer %>
