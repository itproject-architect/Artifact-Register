<% include partials/header %>

<section class="profilepage">
    <div class="container-fluid mt-5">
        <div class="row">
            <div class="col-3 float-left mt-5">
                <a id="edit-button" class="btn btn-raised btn-primary btn-block btn-capitalize" href="profile/edit">Edit Profile</a>
                <a id="edit-button" class="btn btn-raised btn-primary btn-block btn-capitalize" href="profile/manage">Manage Artifacts</a>
            </div>

            <div class="col-9 float-right mt-5">
                <div class="container mb-5">
                    <header style="height: auto">
                        <a href="/profile/edit">
                            <% if (user.photo) { %>
                                <img class="img-small circle-image img-thumbnail mb-3"
                                     style="box-shadow: 0 0 8px -3px #000"
                                     src="<%= user.photo %>" alt="<%= user.username %>" href="/profile/edit"/>
                            <% } else { %>
                                <button class="author-icon mb-3" data-toggle="tooltip"
                                        title="<%= user.name %>"><%= user.name.substring(0, 1) %></button>
                            <% } %>
                        </a>
                    </header>
                    <h2 class="text-center text-capitalize"><%= user.name %></h2>
                </div>

                <div class="container">
                    <% var years = Array.from(artifacts.keys()).sort((a,b) => b - a); %>
                    <% years.forEach(function (year) { %>
                    <div class="card">
                        <button class="btn btn-block btn-success btn-raised"
                                data-toggle="collapse" data-target="#artifacts<%= year %>">
                            <%= year %>
                        </button>
                        <div class="card-body pb-0 collapse" id="artifacts<%= year %>">
                            <div class="row">
                                <% artifacts.get(year).forEach(function (art) { %>
                                <div class="col-4 post">
                                    <a href="artifactposts/<%= art._id %>" style="min-height: auto">
                                        <img class="img-medium"
                                             src="<%= art.image[0] %>" alt="<%= art.name %>"/>
                                    </a>
                                </div>
                                <% }) %>
                            </div>
                        </div>
                    </div>
                    <% }) %>
                </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>


<% include partials/footer %>